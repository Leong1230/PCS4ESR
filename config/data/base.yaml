# Managed by Hydra

dataset_root_path: None

batch_size: 1
num_workers: 4
voxel_size: 0.02 #scannet default: 0.02

sdf_queries: 
  queries_ratio_on_surface: 0.005 #0.5
  queries_ratio_off_surface: 0.02 # 2
  queries_stds: [0.024, 0.16, 0.64]
  queries_ratio_per_std: [0.5, 0.49, 0.01, 0.01] # The last number refers to query points sampled uniformly in the given range


udf_queries: 
  use_mask_queries: False
  queries_stds: [0.024, 0.16, 0.64]
  max_dist: 1

supervision:
  only_l1_sdf_loss: false
  structure_weight: 20.0

  gt_type: "PointTSDFVolume"

  on_surface:
    normal_loss: False # supervised normal by nksr style loss
    weight: 200.0
    normal_weight: 100.0
    subsample: 10000
    svh_tree_depth: 4

  sdf:
    max_dist: 0.2
    weight: 300.0
    reg_sdf_weight: 0.0
    svh_tree_depth: 4
    samplers:
      - type: "uniform"
        n_samples: 10000
        expand: 1
        expand_top: 3
      - type: "band"
        n_samples: 10000
        eps: 0.5    # Times voxel size.

    truncate: False # whether to truncate the SDF values
    gt_type: "l1"   # or 'l1'
    gt_soft: true
    gt_band: 1.0        # times voxel size.
    pd_transform: true
    # (For AV Supervision)
    vol_sup: true

  udf:
    max_dist: 0.2
    abs_sdf: True
    weight: 150.0
    svh_tree_depth: 4
    # weight: 0.0
    samplers:
      - type: "uniform"
        n_samples: 10000
        expand: 1
        expand_top: 5
      - type: "band"
        n_samples: 10000
        eps: 0.5    # Times voxel size.

  eikonal:
    loss: True
    flip: True # flip the gradient sign
    weight: 10.0

num_input_points: 10000
uniform_sampling: True
input_splats: False
num_query_points: 50000
std_dev: 0.00 # noise to add to the input points
in_memory: True # whether precompute voxel indices and load voxel into memory
take: 1 # how many data to take for training and validation, -1 means all
intake_start: 51
over_fitting: True # whether to use only one voxel for training and validation

augmentation:
  use_aug: False
  loops: 4

reconstruction:
  trim: True
  gt_mask: False
  gt_sdf: False

visualization:
  save: True
  Mesh: True
  Input_points: True
  Dense_points: False


